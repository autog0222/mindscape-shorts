<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindScape - XR Visual Therapy [v2.4]</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Orbitron:wght@400;700&display=swap');

        /* --- Scrollbar Hiding & Base Styles --- */
        html {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #050505;
            color: white;
            overflow-x: hidden;
            margin: 0;
            &::-webkit-scrollbar {
                display: none;
            }
        }

        /* 스크롤 잠금 클래스 */
        body.scroll-locked {
            overflow: hidden !important;
            height: 100vh;
            touch-action: none; /* 모바일 터치 방지 */
        }

        .font-future { font-family: 'Orbitron', sans-serif; }

        /* --- Cinematic Parallax System --- */
        .cinematic-section {
            position: relative;
            width: 100%;
            height: 250vh; 
        }

        .sticky-background {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            z-index: 0;
        }

        .bg-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 10s ease-out;
        }
        
        .cinematic-section:hover .bg-image {
            transform: scale(1.05);
        }

        .overlay-gradient {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.8));
            z-index: 1;
        }

        .scrolling-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
        }

        .story-text {
            position: absolute;
            width: 100%;
            text-align: center;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s cubic-bezier(0.165, 0.84, 0.44, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
        }

        .story-text.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* 기본 위치 (가로 모니터) */
        .pos-1 { top: 30vh; }
        .pos-2 { top: 110vh; }
        .pos-3 { top: 190vh; }

        .text-gradient {
            background: linear-gradient(135deg, #e2e8f0 0%, #2dd4bf 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* Imported Styles for Pricing Cards */
        .glass-panel {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.7); 
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 24px;
            transition: all 0.5s ease;
        }
        .pricing-card {
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(209, 213, 219, 0.5);
        }
        .pricing-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(45, 212, 191, 0.15);
            border-color: rgba(45, 212, 191, 0.6);
        }

        /* --- XR Viewport Styles --- */
        .xr-viewport {
            perspective: 1000px;
            overflow: hidden;
            position: relative;
            background: #000;
            transform-style: preserve-3d; 
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); 
        }

        /* [VERSION 2.4] Bio-Feedback Toast Style Update */
        #bio-feedback-toast {
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 20px rgba(45, 212, 191, 0.2); 
            z-index: 60;
        }
        #bio-feedback-toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Scroll Hint */
        .scroll-hint {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 50;
            animation: bounce 2s infinite; pointer-events: none; opacity: 1; transition: opacity 0.5s;
        }
        .scroll-hint.hidden { opacity: 0; }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateX(-50%) translateY(0);}
            40% {transform: translateX(-50%) translateY(-10px);}
            60% {transform: translateX(-50%) translateY(-5px);}
        }

        .pricing-card-light:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* === [Vertical Monitor Optimization] === */
        /* 화면이 가로보다 세로가 더 긴 경우 (피벗 모니터) */
        @media (orientation: portrait) {
            .cinematic-section {
                height: 180vh; /* 세로가 길므로 스크롤 길이 축소 */
            }
            /* 텍스트 간격 좁힘 */
            .pos-1 { top: 25vh; }
            .pos-2 { top: 75vh; }
            .pos-3 { top: 125vh; }
            
            /* 글자가 너무 커서 줄바꿈이 어색하지 않도록 조정 */
            .story-text h2 {
                font-size: 3rem !important; /* text-5xl ~ 6xl 사이 */
                line-height: 1.3;
            }
            .story-text p {
                font-size: 1.1rem !important;
                max-width: 80%;
            }
            
            /* 섹션별 여백 조정 */
            #solution { height: 220vh !important; } /* 솔루션 섹션 높이 조정 */
        }
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav id="main-nav" class="fixed w-full z-50 px-6 py-4 bg-gradient-to-b from-black/80 to-transparent backdrop-blur-[2px] transition-transform duration-700 ease-in-out">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="text-2xl font-bold font-future tracking-wider text-white flex items-center gap-2 cursor-pointer" onclick="window.scrollTo(0,0)">
                <i data-lucide="brain-circuit" class="text-teal-400"></i>
                MindScape
            </div>
            <div class="hidden md:flex gap-8 text-sm font-light text-gray-300">
                <a href="#story-1" class="hover:text-teal-400 transition">Story</a>
                <a href="#solution" class="hover:text-teal-400 transition">Features</a>
                <a href="#xr-experience" class="hover:text-teal-400 transition">Experience</a>
                <a href="#pricing-section" class="hover:text-teal-400 transition">Pricing</a>
            </div>
            <div class="flex gap-3">
                 <button onclick="toggleAutoScroll()" id="auto-scroll-btn" class="px-4 py-2 rounded-full border border-white/20 hover:bg-white/10 text-white text-xs font-bold transition flex items-center gap-1 w-32 justify-center backdrop-blur-md">
                    <span id="scroll-btn-text">▼ Auto View</span>
                </button>
                <button class="px-5 py-2 rounded-full bg-teal-500 hover:bg-teal-400 text-black font-bold text-sm transition shadow-[0_0_15px_rgba(45,212,191,0.4)]">
                    Pre-order
                </button>
            </div>
        </div>
    </nav>

    <div class="scroll-hint" id="scroll-hint">
        <p class="text-[10px] text-center mb-1 uppercase tracking-widest text-gray-400">Scroll Down</p>
        <i data-lucide="chevron-down" class="w-6 h-6 text-white mx-auto"></i>
    </div>

    <!-- === PART 1: THE PROBLEM (Rainy City) === -->
    <section class="cinematic-section" id="story-1">
        <div class="sticky-background">
            <div class="overlay-gradient"></div>
            <img src="https://images.unsplash.com/photo-1516550893923-42d28e5677af?q=80&w=2944&auto=format&fit=crop" class="bg-image" alt="Gloomy City">
        </div>
        <div class="scrolling-content">
            <div class="story-text pos-1">
                <h2 class="text-5xl md:text-7xl font-bold mb-6 leading-tight drop-shadow-lg">
                    요즘,<br>삶이 힘드신가요?
                </h2>
                <p class="text-xl md:text-2xl text-gray-300 font-light max-w-2xl drop-shadow-md">
                    반복되는 일상, 끝이 보이지 않는 경쟁 속에서<br>마음의 여유를 잃어가고 있지는 않나요?
                </p>
            </div>
            <div class="story-text pos-2">
                <h2 class="text-4xl md:text-6xl font-bold mb-6 leading-tight text-gray-200 drop-shadow-lg">
                    심리상담소 방문,<br>망설여지시나요?
                </h2>
                <div class="flex flex-col gap-4 mt-4 text-lg text-gray-400 font-light">
                    <span class="bg-black/50 px-4 py-2 rounded-full backdrop-blur-sm">"시간이 없어서..."</span>
                    <span class="bg-black/50 px-4 py-2 rounded-full backdrop-blur-sm">"비용이 부담돼서..."</span>
                    <span class="bg-black/50 px-4 py-2 rounded-full backdrop-blur-sm">"누가 알까 봐..."</span>
                </div>
            </div>
             <div class="story-text pos-3">
                <h2 class="text-4xl md:text-6xl font-bold mb-6 leading-tight text-white drop-shadow-lg">
                    단순한 언어치료로는<br>안정을 얻기 힘드신가요?
                </h2>
                <p class="text-xl text-gray-300">
                    말로 설명할 수 없는 감정들은,<br>단순한 대화만으로는 치유되기 어렵습니다.
                </p>
            </div>
        </div>
    </section>

    <!-- === PART 2: THE SOLUTION (Transition to Forest) === -->
    <section class="cinematic-section" id="solution" style="height: 300vh;">
        <div class="sticky-background">
            <div class="overlay-gradient" style="background: linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(0,0,0,0.2));"></div>
            <img src="https://images.unsplash.com/photo-1531306728370-e2ebd9d7bb99?q=80&w=2940&auto=format&fit=crop" class="bg-image" alt="Healing Space">
        </div>
        <div class="scrolling-content">
            <div class="story-text pos-1">
                <span class="text-teal-400 font-future tracking-[0.3em] mb-4 text-sm animate-pulse">THE XR REVOLUTION</span>
                <h2 class="text-6xl md:text-8xl font-bold mb-6 leading-tight">
                    <span class="text-gradient">MindScape</span>
                </h2>
                <p class="text-2xl md:text-3xl font-medium leading-relaxed max-w-4xl">
                    당신의 방이 <strong>치유의 숲</strong>이 됩니다.<br>
                    언어를 넘어선 <span class="text-teal-400">시각적 몰입 치료</span>를 경험하세요.
                </p>
            </div>

            <div class="story-text pos-2">
                <div class="glass-panel max-w-3xl">
                    <div class="flex items-center justify-center mb-6">
                        <div class="p-4 bg-teal-500/20 rounded-full border border-teal-500/50">
                            <i data-lucide="shield-check" class="w-12 h-12 text-teal-400"></i>
                        </div>
                    </div>
                    <h3 class="text-4xl font-bold mb-4">완벽한 보안</h3>
                    <p class="text-lg text-gray-300 leading-relaxed">
                        모든 상담 내역은 클라우드가 아닌, <strong>오직 당신의 XR 기기에만</strong><br>
                        암호화되어 안전하게 저장됩니다.
                    </p>
                </div>
            </div>

            <!-- Counselor Profiles -->
            <div class="story-text pos-3">
                <div class="glass-panel max-w-4xl w-full">
                    <h3 class="text-4xl font-bold mb-8">나만의 AI 상담사</h3>
                    <!-- md:grid-cols-2 유지: 세로 모니터에서도 2열은 안정적으로 보임 -->
                    <div class="grid md:grid-cols-2 gap-6 text-left">
                        <!-- Card 1: Aura -->
                        <div class="relative h-[320px] rounded-2xl overflow-hidden shadow-xl group cursor-pointer border border-white/10">
                            <img id="img-counselor-aura" src="" alt="Dr. Aura" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"></div>
                            
                            <div class="absolute top-0 left-0 p-6 flex gap-2">
                                <span class="px-2 py-1 bg-teal-500/80 backdrop-blur-md rounded-md text-[10px] font-bold uppercase">Basic</span>
                                <span class="px-2 py-1 bg-purple-500/80 backdrop-blur-md rounded-md text-[10px] font-bold uppercase">Empathy</span>
                            </div>

                            <div class="absolute bottom-0 left-0 w-full p-6 text-white transition-all duration-300">
                                <h4 class="text-2xl font-bold mb-1">Dr. Aura</h4>
                                <p class="text-purple-300 text-sm font-bold mb-0 uppercase">따뜻한 공감과 위로</p>
                                <div class="max-h-0 overflow-hidden opacity-0 group-hover:max-h-24 group-hover:opacity-100 transition-all duration-500 ease-in-out">
                                    <p class="text-gray-300 text-sm leading-relaxed pt-2">
                                        "당신의 모든 감정은 소중합니다.<br>마음 깊은 곳의 이야기를 들어드릴게요."
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Card 2: Theo -->
                        <div class="relative h-[320px] rounded-2xl overflow-hidden shadow-xl group cursor-pointer border border-white/10">
                            <img id="img-counselor-theo" src="" alt="Prof. Theo" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"></div>
                            
                            <div class="absolute top-0 left-0 p-6 flex gap-2">
                                <span class="px-2 py-1 bg-blue-500/80 backdrop-blur-md rounded-md text-[10px] font-bold uppercase">Logic</span>
                            </div>

                            <div class="absolute bottom-0 left-0 w-full p-6 text-white transition-all duration-300">
                                <h4 class="text-2xl font-bold mb-1">Prof. Theo</h4>
                                <p class="text-blue-300 text-sm font-bold mb-0 uppercase">냉철한 분석과 해결</p>
                                <div class="max-h-0 overflow-hidden opacity-0 group-hover:max-h-24 group-hover:opacity-100 transition-all duration-500 ease-in-out">
                                    <p class="text-gray-300 text-sm leading-relaxed pt-2">
                                        "혼란스러운 문제들을 하나씩 분해해봅시다.<br>답은 반드시 존재합니다."
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Card 3: Serene -->
                        <div class="relative h-[320px] rounded-2xl overflow-hidden shadow-xl group cursor-pointer border border-white/10">
                            <img id="img-counselor-serene" src="" alt="Guide Serene" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"></div>
                            
                            <div class="absolute top-0 left-0 p-6 flex gap-2">
                                <span class="px-2 py-1 bg-emerald-500/80 backdrop-blur-md rounded-md text-[10px] font-bold uppercase">Meditation</span>
                            </div>

                            <div class="absolute bottom-0 left-0 w-full p-6 text-white transition-all duration-300">
                                <h4 class="text-2xl font-bold mb-1">Guide Serene</h4>
                                <p class="text-emerald-300 text-sm font-bold mb-0 uppercase">마인드풀니스 가이드</p>
                                <div class="max-h-0 overflow-hidden opacity-0 group-hover:max-h-24 group-hover:opacity-100 transition-all duration-500 ease-in-out">
                                    <p class="text-gray-300 text-sm leading-relaxed pt-2">
                                        "깊게 숨을 들이마시세요.<br>지금 이 순간, 당신은 온전히 안전합니다."
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Card 4: Custom -->
                        <div class="relative h-[320px] rounded-2xl overflow-hidden shadow-xl group cursor-pointer border border-white/10">
                            <img id="img-counselor-custom" src="" alt="Custom" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"></div>
                            
                            <div class="absolute top-0 left-0 p-6 flex gap-2">
                                <span class="px-2 py-1 bg-orange-500/80 backdrop-blur-md rounded-md text-[10px] font-bold uppercase">Create</span>
                            </div>

                            <div class="absolute bottom-0 left-0 w-full p-6 text-white transition-all duration-300">
                                <h4 class="text-2xl font-bold mb-1">Custom Persona</h4>
                                <p class="text-orange-300 text-sm font-bold mb-0 uppercase">나만의 상담사 생성</p>
                                <div class="max-h-0 overflow-hidden opacity-0 group-hover:max-h-24 group-hover:opacity-100 transition-all duration-500 ease-in-out">
                                    <p class="text-gray-300 text-sm leading-relaxed pt-2">
                                        원하는 외모, 목소리, 성격을<br>직접 설정하여 완벽한 상담사를 만드세요.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- === PART 3: INTERACTIVE XR EXPERIENCE === -->
    <section id="xr-experience" class="bg-gradient-to-b from-[#f0fdfa] to-[#f0fdfa] py-64 px-6 relative z-20 border-t border-white/5 scroll-mt-0">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-16">
                <span class="px-3 py-1 rounded-full bg-teal-500/20 text-teal-600 text-xs font-bold uppercase mb-3 inline-block border border-teal-500/30">Interactive Demo</span>
                <h2 class="text-3xl md:text-5xl font-bold mb-4 text-gray-900">MindScape Experience</h2>
                <p class="text-gray-600">화면이 중앙에 오면 시연이 시작됩니다.</p>
            </div>

            <!-- XR Viewport -->
            <div id="xr-viewport" class="relative mx-auto max-w-5xl aspect-video rounded-3xl border-4 border-gray-800 bg-black overflow-hidden shadow-2xl group xr-viewport">
                
                <!-- Simulation Layer -->
                <div id="simulation-container" class="absolute inset-0 z-20">
                    <!-- Backgrounds -->
                    <div id="demo-bg-1" class="absolute inset-0 bg-cover bg-center z-10 transition-opacity duration-[3000ms]" style="opacity: 1;"></div>
                    <div id="demo-bg-2" class="absolute inset-0 bg-cover bg-center z-10 transition-opacity duration-[3000ms]" style="opacity: 0;"></div>
                    <div id="bg-overlay" class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/20 z-20 pointer-events-none"></div>

                    <!-- HUD Interface -->
                    <div id="hud-layer" class="absolute inset-0 z-30 p-8 flex flex-col justify-between opacity-0 transition-opacity duration-1000 pointer-events-none">
                        <!-- Top Bar -->
                        <div class="flex justify-between items-start opacity-90 relative">
                            <div class="flex gap-6">
                                <div class="flex flex-col">
                                    <span class="text-[10px] text-teal-400 font-future tracking-widest mb-1">REC ●</span>
                                    <span id="hud-time" class="text-xl text-white font-mono font-light">00:00:00</span>
                                </div>
                                <div class="h-10 w-[1px] bg-white/20"></div>
                                
                                <!-- [VERSION 2.4] Bio-Sync Widget & Toast Container -->
                                <div id="bio-sync-widget" class="flex flex-col relative">
                                    <span class="text-[10px] text-gray-400 font-future tracking-widest mb-1">BIO-SYNC</span>
                                    <div class="flex items-center gap-2">
                                        <i data-lucide="heart" class="w-4 h-4 text-red-500 fill-red-500 animate-pulse"></i>
                                        <span id="hud-bpm" class="text-sm text-white font-mono">108 BPM</span>
                                    </div>

                                    <!-- [VERSION 2.4] Bio-Feedback Toast (Placed Inside Widget for perfect alignment) -->
                                    <div id="bio-feedback-toast" class="absolute top-full left-0 mt-3 bg-black/60 backdrop-blur-xl border border-teal-400/60 p-4 rounded-xl w-max max-w-xs z-50 text-left origin-top-left">
                                        <div class="flex items-start gap-3">
                                            <div class="bg-teal-500/20 p-2 rounded-full text-teal-400 shrink-0"><i data-lucide="zap" class="w-4 h-4"></i></div>
                                            <div>
                                                <h5 class="text-sm font-bold text-teal-300 mb-1 font-future tracking-wider">Visual Bio-Feedback</h5>
                                                <p class="text-[11px] text-gray-100 leading-relaxed font-light">
                                                    단순히 시각적인 배경을 바라보는 것만으로도<br><strong>뇌는 더 빠른 안정</strong>을 찾습니다.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="flex gap-3 ml-auto">
                                 <div class="bg-white/10 backdrop-blur px-3 py-1 rounded-full border border-white/20 flex items-center gap-2">
                                    <div class="w-2 h-2 bg-teal-400 rounded-full"></div>
                                    <span class="text-xs text-white font-future">MindScape Active</span>
                                 </div>
                            </div>
                        </div>
                        
                        <!-- Chat Box -->
                        <div class="w-full flex flex-col items-center gap-4">
                            <div id="caption-container" class="bg-black/60 backdrop-blur-md border border-white/10 px-8 py-6 rounded-full text-center transform transition-all duration-500 opacity-0 translate-y-4">
                                <p id="caption-text" class="text-lg md:text-xl text-white font-medium leading-relaxed shadow-black drop-shadow-md">
                                    <!-- Text goes here -->
                                </p>
                            </div>
                            <div id="voice-viz" class="flex gap-1 h-6 items-center opacity-0 transition-opacity duration-500">
                                <div class="w-1 bg-teal-400 h-2 animate-[bounce_1s_infinite]"></div>
                                <div class="w-1 bg-teal-400 h-4 animate-[bounce_1.2s_infinite]"></div>
                                <div class="w-1 bg-teal-400 h-3 animate-[bounce_0.8s_infinite]"></div>
                                <div class="w-1 bg-teal-400 h-5 animate-[bounce_1.1s_infinite]"></div>
                                <div class="w-1 bg-teal-400 h-2 animate-[bounce_0.9s_infinite]"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- PRICING SECTION -->
    <section id="pricing-section" class="bg-[#f0fdfa] pb-32 pt-10 px-6 relative transition-colors duration-1000">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-16">
                <span class="px-3 py-1 rounded-full border border-teal-500/30 bg-teal-50 text-teal-600 text-xs tracking-widest uppercase mb-4 inline-block">Pricing Plan</span>
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900">Choose Your Journey</h2>
                <p class="text-gray-500">마음의 평화를 위한 합리적인 선택</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- Free Tier -->
                <div class="glass-card p-8 pricing-card flex flex-col relative group h-full">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-gray-700 mb-2">Starter</h3>
                        <div class="text-4xl font-bold text-gray-900 mb-2">₩0 <span class="text-sm font-normal text-gray-500">/ month</span></div>
                        <p class="text-sm text-gray-500">MindScape의 핵심 기능을<br>부담 없이 경험해보세요.</p>
                    </div>
                    <ul class="space-y-4 mb-8 flex-1">
                        <li class="flex items-center gap-3 text-sm text-gray-600"><i data-lucide="check" class="w-4 h-4 text-teal-500"></i>기본 상담 환경 1종 (Forest)</li>
                        <li class="flex items-center gap-3 text-sm text-gray-600"><i data-lucide="check" class="w-4 h-4 text-teal-500"></i>AI 상담 (일 10분 제한)</li>
                        <li class="flex items-center gap-3 text-sm text-gray-600"><i data-lucide="check" class="w-4 h-4 text-teal-500"></i>기본 감정 리포트</li>
                    </ul>
                    <button class="w-full py-3 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium transition">Start Free</button>
                </div>

                <!-- Monthly Tier (Aligned) -->
                <div class="glass-card p-8 pricing-card border-teal-500/30 bg-teal-50/60 flex flex-col relative h-full shadow-xl">
                    <div class="absolute top-0 right-0 px-3 py-1 bg-teal-500 text-white text-xs font-bold rounded-bl-xl rounded-tr-xl">POPULAR</div>
                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-teal-600 mb-2">Monthly Pass</h3>
                        <div class="text-4xl font-bold text-gray-900 mb-2">₩9,900 <span class="text-sm font-normal text-gray-500">/ month</span></div>
                        <p class="text-sm text-gray-500">모든 기능을 자유롭게 이용하는<br>월간 구독 플랜입니다.</p>
                    </div>
                    <ul class="space-y-4 mb-8 flex-1">
                        <li class="flex items-center gap-3 text-sm text-gray-700"><i data-lucide="check" class="w-4 h-4 text-teal-500"></i><strong>모든 상담 환경 무제한 이용</strong></li>
                        <li class="flex items-center gap-3 text-sm text-gray-700"><i data-lucide="check" class="w-4 h-4 text-teal-500"></i><strong>4인의 AI 상담사 선택 가능</strong></li>
                        <li class="flex items-center gap-3 text-sm text-gray-600"><i data-lucide="check" class="w-4 h-4 text-teal-500"></i>상담 시간 무제한</li>
                        <li class="flex items-center gap-3 text-sm text-gray-600"><i data-lucide="check" class="w-4 h-4 text-teal-500"></i>오프라인 모드 지원</li>
                    </ul>
                    <button class="w-full py-3 rounded-xl bg-teal-500 hover:bg-teal-600 text-white font-bold shadow-lg shadow-teal-500/20 transition mb-3">Subscribe Monthly</button>
                    <button class="w-full py-2 text-xs text-teal-600 hover:text-teal-800 font-medium flex items-center justify-center gap-1">View Premium Features <i data-lucide="arrow-right" class="w-3 h-3"></i></button>
                </div>

                <!-- Yearly Tier -->
                <div class="glass-card p-8 pricing-card border-purple-500/30 bg-purple-50/40 flex flex-col relative h-full">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-purple-600 mb-2">Yearly Pass</h3>
                        <div class="text-4xl font-bold text-gray-900 mb-2">₩99,000 <span class="text-sm font-normal text-gray-500">/ year</span></div>
                        <p class="text-sm text-gray-500">월간 플랜과 혜택은 동일하지만<br><strong class="text-purple-600">약 2개월분 요금 할인</strong> 효과.</p>
                    </div>
                    <ul class="space-y-4 mb-8 flex-1">
                        <li class="flex items-center gap-3 text-sm text-gray-600"><i data-lucide="check" class="w-4 h-4 text-purple-500"></i>Monthly Pass 모든 혜택 포함</li>
                        <li class="flex items-center gap-3 text-sm text-gray-700"><i data-lucide="check" class="w-4 h-4 text-purple-500"></i><strong>연간 약 17% 비용 절감</strong></li>
                        <li class="flex items-center gap-3 text-sm text-gray-600"><i data-lucide="check" class="w-4 h-4 text-purple-500"></i>Priority Support (우선 지원)</li>
                    </ul>
                    <button class="w-full py-3 rounded-xl border border-purple-500/50 hover:bg-purple-50 text-purple-600 font-medium transition mb-3">Subscribe Yearly</button>
                    <button class="w-full py-2 text-xs text-purple-600 hover:text-purple-800 font-medium flex items-center justify-center gap-1">View Premium Features <i data-lucide="arrow-right" class="w-3 h-3"></i></button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-[#f0fdfa] py-12 text-center text-gray-400 text-xs border-t border-gray-200">
        <p>&copy; 2026 MindScape. All rights reserved.</p>
        <p class="mt-2">본 서비스는 의료 행위를 대체하지 않으며, 심리 안정을 위한 보조 수단입니다.</p>
    </footer>

    <script>
        // --- Configuration & Elements ---
        const siteConfig = {
            images: {
                bg1: 'aura.png',
                bg2: 'https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=2948&auto=format&fit=crop',
                counselors: {
                    aura: 'aura.png',
                    theo: 'theo.png',
                    serene: 'serene.png',
                    custom: 'https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=2000&auto=format&fit=crop'
                }
            }
        };

        const simulationContainer = document.getElementById('simulation-container');
        const hudLayer = document.getElementById('hud-layer');
        const demoBg1 = document.getElementById('demo-bg-1');
        const demoBg2 = document.getElementById('demo-bg-2');
        const bgOverlay = document.getElementById('bg-overlay');
        const captionContainer = document.getElementById('caption-container');
        const captionText = document.getElementById('caption-text');
        const voiceViz = document.getElementById('voice-viz');
        const hudTime = document.getElementById('hud-time');
        const hudBpm = document.getElementById('hud-bpm');
        const xrSection = document.getElementById('xr-experience');
        const nav = document.getElementById('main-nav');
        const bioWidget = document.getElementById('bio-sync-widget'); 
        const bioToast = document.getElementById('bio-feedback-toast');

        // --- Safe Initialization ---
        (function init() {
            if (typeof lucide !== 'undefined' && lucide.createIcons) lucide.createIcons();
            else window.addEventListener('load', () => lucide.createIcons());

            if(demoBg1) demoBg1.style.backgroundImage = `url('${siteConfig.images.bg1}')`;
            if(demoBg2) demoBg2.style.backgroundImage = `url('${siteConfig.images.bg2}')`;

            // Load Counselor Images
            const auraImg = document.getElementById('img-counselor-aura');
            if(auraImg) auraImg.src = siteConfig.images.counselors.aura;

            const theoImg = document.getElementById('img-counselor-theo');
            if(theoImg) theoImg.src = siteConfig.images.counselors.theo;

            const sereneImg = document.getElementById('img-counselor-serene');
            if(sereneImg) sereneImg.src = siteConfig.images.counselors.serene;

            const customImg = document.getElementById('img-counselor-custom');
            if(customImg) customImg.src = siteConfig.images.counselors.custom;

            const scrollHint = document.getElementById('scroll-hint');
            if(scrollHint) {
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 100) scrollHint.classList.add('hidden');
                    else scrollHint.classList.remove('hidden');
                });
            }

            // General Scroll Animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('active');
                    else entry.target.classList.remove('active');
                });
            }, { root: null, rootMargin: '0px', threshold: 0.2 });

            document.querySelectorAll('.story-text').forEach((el) => observer.observe(el));

            // [NEW] Init Story Snapping Logic
            initStorySnapping();

            // Start Logic for Scroll Locking & Delay
            let hasStarted = false;

            // XR Experience Observer
            const simObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    // [수정] threshold를 0.5로 변경하여 조금 더 일찍, 자연스럽게 감지 시작
                    if (entry.isIntersecting && !hasStarted) {
                        hasStarted = true;
                        
                        // Lock Scroll
                        lockScrollAtSection();

                        // 2.5s Delay before start
                        setTimeout(() => {
                            if(hudLayer) hudLayer.style.opacity = '1'; 
                            startSimulationFlow();
                        }, 2500);
                    }
                });
            }, { threshold: 0.5 }); // [변경] 0.6 -> 0.5

            if(xrSection) simObserver.observe(xrSection);
        })();

        // [NEW] Story Snapping Function (Manual Scroll Helper)
        function initStorySnapping() {
            const storyPoints = document.querySelectorAll('.story-text');
            
            const snapObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    // Check if intersecting AND not already viewed
                    if (entry.isIntersecting && !entry.target.classList.contains('snap-viewed')) {
                        const el = entry.target;
                        
                        // Mark as viewed immediately to prevent double locking
                        el.classList.add('snap-viewed');

                        // Only snap if manual scrolling (not auto scrolling)
                        if (!isScrolling) {
                            // Smooth scroll element to center
                            // el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }
                });
            }, { 
                threshold: 0.5, 
                rootMargin: "-10% 0px -10% 0px"
            });

            storyPoints.forEach(pt => snapObserver.observe(pt));
        }

        // Helper Function: Lock Scroll
        function lockScrollAtSection() {
            if(isScrolling) {
                wasAutoScrolling = true;
                toggleAutoScroll(); // Stop auto scroll for XR demo
            }

            if(xrSection) {
                // 부드러운 감속을 위해 scrollIntoView 실행
                xrSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            // [수정] 500ms -> 1000ms로 변경
            // 스크롤이 완전히 멈춘 뒤에 잠금을 걸어야 '툭' 끊기는 느낌이 사라짐
            setTimeout(() => {
                document.body.classList.add('scroll-locked');
                if(nav) nav.classList.add('-translate-y-full');
            }, 1000);
        }

        // Helper Function: Unlock Scroll
        function unlockScroll() {
            document.body.classList.remove('scroll-locked');
            if(nav) nav.classList.remove('-translate-y-full');
            
            // Resume auto scroll if it was active
            if(wasAutoScrolling) {
                wasAutoScrolling = false;
                setTimeout(() => {
                    toggleAutoScroll();
                }, 800);
            }
            console.log("Scroll Unlocked");
        }

        // --- Cinematic Auto Scroll Logic (Variable Speed) ---
        let scrollInterval;
        let isScrolling = false;
        let isPaused = false;
        let wasAutoScrolling = false;
        let visitedTargets = new Set();
        
        // Physics variables
        let currentScrollSpeed = 0;
        const MAX_SPEED = 12; // Maximum travel speed (px/frame)
        const MIN_SPEED = 1;  // Crawl speed just before stopping
        const BRAKING_DISTANCE = 450; // Distance to start slowing down (px)

        window.toggleAutoScroll = function() {
            const btnText = document.getElementById('scroll-btn-text');
            const html = document.documentElement;
            
            if (isScrolling) {
                // STOP
                cancelAnimationFrame(scrollInterval);
                isScrolling = false;
                isPaused = false;
                currentScrollSpeed = 0;
                if(btnText) btnText.innerText = '▼ Auto View';
                html.style.scrollBehavior = 'smooth';
                document.body.style.cursor = 'default';
                
                if (!wasAutoScrolling) visitedTargets.clear();
            } else {
                // START
                isScrolling = true;
                if(btnText) btnText.innerText = '❚❚ Stop Auto';
                html.style.scrollBehavior = 'auto'; 
                document.body.style.cursor = 'none';
                
                // Targets to stop at
                const targets = document.querySelectorAll('.story-text, .pricing-card');
                
                function step() {
                    if (!isScrolling) return;

                    if (!isPaused) {
                        const viewportCenter = window.innerHeight / 2;
                        let activeTarget = null;
                        let closestDistance = Infinity; // Distance to next target

                        // 1. Find the next relevant target
                        for (const target of targets) {
                            if (visitedTargets.has(target)) continue;

                            const rect = target.getBoundingClientRect();
                            const targetCenter = rect.top + (rect.height / 2);
                            const dist = targetCenter - viewportCenter;

                            // We only care about targets that are below or extremely close to center
                            // 'dist > -20' allows catching items slightly passed
                            if (dist > -20 && dist < closestDistance) {
                                closestDistance = dist;
                                activeTarget = target;
                            }
                        }

                        // 2. Calculate Target Speed based on distance
                        let targetSpeed = MAX_SPEED;

                        if (activeTarget) {
                            if (closestDistance < BRAKING_DISTANCE) {
                                // Braking Logic: Interpolate speed based on distance
                                // As we get closer (distance -> 0), speed -> MIN_SPEED
                                const ratio = closestDistance / BRAKING_DISTANCE;
                                targetSpeed = MIN_SPEED + (ratio * (MAX_SPEED - MIN_SPEED));
                            }

                            // Stop Logic
                            if (closestDistance < 10) { // Sweet spot
                                isPaused = true;
                                visitedTargets.add(activeTarget);
                                currentScrollSpeed = 0;

                                // Custom pause duration
                                const duration = activeTarget.classList.contains('story-text') ? 2200 : 1800;
                                setTimeout(() => { isPaused = false; }, duration);
                                
                                // Pause loop for this frame
                                return requestAnimationFrame(step); 
                            }
                        }

                        // 3. Apply Smooth Acceleration/Deceleration (Easing)
                        // This makes the speed change feel natural rather than instant
                        currentScrollSpeed += (targetSpeed - currentScrollSpeed) * 0.05; 

                        // 4. Move
                        window.scrollBy(0, currentScrollSpeed);
                    }

                    // Check for bottom of page
                    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 5) {
                        isScrolling = false;
                        if(btnText) btnText.innerText = '▼ Auto View';
                        html.style.scrollBehavior = 'smooth';
                        document.body.style.cursor = 'default';
                        visitedTargets.clear();
                        return;
                    }
                    
                    scrollInterval = requestAnimationFrame(step);
                }
                
                scrollInterval = requestAnimationFrame(step);
            }
        };

        // --- Extended Dialogue Scenario ---
        // [수정] 전체 시나리오를 30초 분량으로 단축 (기존 54초)
        const dialogues = [
            { text: "User: 일이 너무 많아서 숨이 막혀. 번아웃인가 봐...", type: "user", delay: 1000 },
            { text: "AI Counselor: 많이 지치셨군요. 잠시 복잡한 생각을 멈추고 숲으로 떠나볼까요?", type: "avatar", delay: 5000 },
            
            { text: "Environment shifting...", type: "system", delay: 9000 }, // 배경 전환 시작
            
            { text: "AI Counselor: 싱그러운 숲 내음이 느껴지시나요? 깊게 들이마시고... 내쉬고...", type: "avatar", delay: 13000 },
            { text: "User: (깊은 한숨) 하아... 꽉 막혔던 가슴이 뚫리는 기분이야.", type: "user", delay: 20000 },
            { text: "AI Counselor: 잘하셨어요. 지금은 오직 당신만을 위한 시간입니다. 편안히 쉬세요.", type: "avatar", delay: 25000 },
            
            { text: "Session Ending...", type: "system", delay: 30000 } // 30초에 종료
        ];

        function updateCaption(text, type) {
            if(!captionContainer || !captionText) return;

            captionContainer.style.opacity = '0';
            if(voiceViz) voiceViz.style.opacity = '0';

            setTimeout(() => {
                if (type === 'user') {
                    captionText.innerHTML = `<span class="text-teal-400 font-bold text-sm block mb-1">USER</span>${text.replace('User: ', '')}`;
                    if(voiceViz) voiceViz.style.opacity = '1';
                } else if (type === 'avatar') {
                    captionText.innerHTML = `<span class="text-purple-400 font-bold text-sm block mb-1">AI COUNSELOR</span>${text.replace('AI Counselor: ', '')}`;
                } else {
                    captionText.innerHTML = `<span class="text-gray-400 italic text-sm">${text}</span>`;
                }
                captionContainer.style.opacity = '1';
            }, 500);
        }

        let clockInterval, bpmInterval;
        let currentBpm = 118, targetBpm = 118; // Start High
        let isStabilizing = false;

        function startClock() {
            if(clockInterval) clearInterval(clockInterval);
            const updateTime = () => {
                const now = new Date();
                if(hudTime) hudTime.innerText = now.toLocaleTimeString('en-GB', { hour12: false });
            };
            updateTime();
            clockInterval = setInterval(updateTime, 1000);
        }

        function startHeartRateMonitor() {
            if(bpmInterval) clearInterval(bpmInterval);
            currentBpm = 118; targetBpm = 118;
            bpmInterval = setInterval(() => {
                const diff = targetBpm - currentBpm;
                const change = diff * 0.1;
                const noise = (Math.random() - 0.5) * 3;
                currentBpm += change + (Math.random() > 0.7 ? noise : 0);
                if(currentBpm > 130) currentBpm = 130;
                if(currentBpm < 60) currentBpm = 60;
                if(hudBpm) hudBpm.innerText = `${Math.round(currentBpm)} BPM`;

                // [VERSION 2.4] Check for End of Stabilization (Goal reached: 80 BPM)
                if(isStabilizing && currentBpm <= 80) {
                    if(bioToast) bioToast.classList.remove('show'); // Hide when relaxed
                    isStabilizing = false;
                }
            }, 800);
        }

        function startSimulationFlow() {
            startClock();
            startHeartRateMonitor();
            
            dialogues.forEach((line) => {
                setTimeout(() => {
                    updateCaption(line.text, line.type);
                    if(line.text.includes("Environment shifting")) {
                        if(demoBg1) demoBg1.style.opacity = "0";
                        setTimeout(() => {
                            if(demoBg2) demoBg2.style.opacity = "1"; 
                            if(bgOverlay) { bgOverlay.classList.remove('from-black/60'); bgOverlay.classList.add('from-black/30'); }
                            targetBpm = 72;
                            
                            // [VERSION 2.3] Start Stabilization Phase -> Show Toast
                            isStabilizing = true;
                            if(bioToast) bioToast.classList.add('show');
                        }, 2000);
                    }
                    if(line.text.includes("Session Ending")) {
                        if(hudLayer) hudLayer.style.opacity = '0';
                        setTimeout(() => { unlockScroll(); }, 1000); 
                    }
                }, line.delay);
            });
        }
    </script>
</body>
</html>
